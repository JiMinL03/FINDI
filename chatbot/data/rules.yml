version: "3.1"

rules:

# 기본 인사 및 fallback ------------------------------------------------
- rule: 인사 응답
  steps:
    - intent: hi
    - action: utter_hi

- rule: 작별 인사
  steps:
    - intent: bye
    - action: utter_bye

- rule: 기본 fallback 응답
  steps:
    - intent: fallback
    - action: action_default_fallback

# --- 학과 관련-----------------------------------------------------

- rule: 학교 카테고리 안내
  steps:
    - intent: ask_category_school
    - action: utter_category_school

- rule: 학교 위치 요청
  steps:
    - intent: get_school_location
    - action: action_school_location

- rule: 학교 연락처 요청
  steps:
    - intent: get_school_contact
    - action: action_school_contact

- rule: 학교 교통 요청
  steps:
    - intent: get_school_transport
    - action: action_school_transport

# --- 학과 관련-----------------------------------------------------
- rule: 단대/학과 카테고리 안내
  steps:
    - intent: ask_category_department
    - action: utter_category_department

- rule: 단과대학별 학과목록 정보 요청
  steps:
    - intent: get_faculty_info
    - action: action_faculty_info

- rule: 각 학과별 정보 요청
  steps:
    - intent: get_department_info
    - action: action_department_info

#---------------------------------------------
- rule: 유저 서비스 링크 정보 요청
  steps:
    - intent: ask_category_services
    - action: action_user_services
#---------------------------------------------
- rule: 공지사항 카테고리 안내
  steps:
    - intent: ask_category_notice
    - action: utter_category_notice

- rule: 작성자별 공지사항 정보 요청
  steps:
    - intent: get_notice
    - action: action_notice

#-------교수님 정보----------------------------------
#- rule: 테스트 폼 실행
#  steps:
#  - intent: ask_category_professor
#  - action: professor_info_form
#  - active_loop: professor_info_form

#- rule: 교수 정보 폼 실행
#  steps:
#  - intent: ask_category_professor
#  - action: professor_info_form
#  - active_loop: professor_info_form
#  - slot_was_set:
#    - decision_slot: null

- rule: 교수 정보 폼 완료 후 라우팅 (이름)
  condition:
  - active_loop: professor_info_form
  steps:
  - action: professor_info_form
  - active_loop: null
  - slot_was_set:
    - decision_slot: professor
  - action: action_professor_by_name

- rule: 교수 정보 폼 완료 후 라우팅 (학과)
  condition:
  - active_loop: professor_info_form
  steps:
  - action: professor_info_form
  - active_loop: null
  - slot_was_set:
    - decision_slot: department
  - action: action_professor_by_department

#-----------------------------------------
- rule: 학사 카테고리 안내
  steps:
    - intent: ask_category_calendar
    - action: utter_category_calendar

- rule: 월별 학사일정 요청
  steps:
    - intent: get_academic_calendar
    - action: action_academic_calendar
#----------------------------------------
- rule: 캠퍼스맵 카테고리 안내
  steps:
    - intent: ask_category_facility
    - action: utter_category_facility

- rule: 건물 정보 요청
  steps:
    - intent: get_facility_info
    - action: action_facility_info

#- rule: faculty_form 실행
#  steps:
#    - intent: get_faculty_info
#    - action: utter_category_school
#    - action: faculty_form
#    - active_loop: faculty_form
#
#- rule: faculty_form 완료 후 액션
#  condition:
#    - active_loop: faculty_form
#  steps:
#    - action: faculty_form
#    - active_loop: null
#    - slot_was_set:
#        - requested_slot: faculty_name
#    - action: action_faculty_info
#
#- rule: department_form 실행
#  steps:
#    - intent: get_department_info
#    - action: department_form
#    - active_loop: department_form
#
#- rule: department_form 완료 후 액션
#  condition:
#    - active_loop: department_form
#  steps:
#    - action: department_form
#    - active_loop: null
#    - action: action_department_info
#
## --- 교수 관련 폼 ---
#- rule: professor_form 실행
#  steps:
#    - intent: get_professor_info
#    - action: professor_form
#    - active_loop: professor_form
#
#- rule: professor_form 완료 후 액션
#  condition:
#    - active_loop: professor_form
#  steps:
#    - action: professor_form
#    - active_loop: null
#    - action: action_professor_info
#
## --- 학사 일정 폼 ---
#- rule: month_form 실행
#  steps:
#    - intent: get_academic_calendar
#    - action: month_form
#    - active_loop: month_form
#
#- rule: month_form 완료 후 액션
#  condition:
#    - active_loop: month_form
#  steps:
#    - action: month_form
#    - active_loop: null
#    - action: action_academic_calendar
#
## --- 시설 정보 폼 ---
#- rule: facility_form 실행
#  steps:
#    - intent: get_facility_info
#    - action: facility_form
#    - active_loop: facility_form
#
#- rule: facility_form 완료 후 액션
#  condition:
#    - active_loop: facility_form
#  steps:
#    - action: facility_form
#    - active_loop: null
#    - action: action_facility_info
#
## --- 서비스 폼 ---
#- rule: service_form 실행
#  steps:
#    - intent: get_user_services
#    - action: service_form
#    - active_loop: service_form
#
#- rule: service_form 완료 후 액션
#  condition:
#    - active_loop: service_form
#  steps:
#    - action: service_form
#    - active_loop: null
#    - action: action_user_services
#
## --- 공지사항 폼 ---
#- rule: notice_form 실행
#  steps:
#    - intent: get_notice
#    - action: notice_form
#    - active_loop: notice_form
#
#- rule: notice_form 완료 후 액션
#  condition:
#    - active_loop: notice_form
#  steps:
#    - action: notice_form
#    - active_loop: null
#    - action: action_notice
#
## --- 단순 액션 호출 ---
#- rule: 교통 안내 요청
#  steps:
#    - intent: ask_category_transport
#    - action: action_category_transport
#
#- rule: 카테고리 캘린더 질문 처리
#  steps:
#    - intent: ask_category_calendar
#    - action: utter_category_calendar
#

- rule: Fallback 처리
  steps:
    - intent: "fallback"
    - action: action_default_fallback
